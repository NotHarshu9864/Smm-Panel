<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Batch | Nova PW</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.tailwindcss.com"></script>

<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        borderp:"#8b5cf6",
        textdim:"#9ca3af"
      }
    }
  }
}
</script>

<style>
body{background:#000;user-select:none}
.card{transition:.25s}
.card:hover{transform:scale(1.03);box-shadow:0 0 12px rgba(139,92,246,.35)}
</style>
</head>

<body class="text-white">

<div class="max-w-6xl mx-auto px-5 py-6">

<!-- TITLE -->
<h1 id="batchTitle" class="text-3xl font-bold mb-4"></h1>

<!-- THUMB -->
<img id="batchThumb" class="rounded-xl mb-6 border border-borderp">

<!-- TABS -->
<div class="flex gap-6 border-b border-borderp/40 mb-6">
  <button onclick="openTab('about')" class="tab active">About</button>
  <button onclick="openTab('video')" class="tab">Video</button>
  <button onclick="openTab('notes')" class="tab">Notes</button>
  <button onclick="openTab('dpp')" class="tab">DPP</button>
</div>

<!-- CONTENT -->
<div id="content"></div>

</div>

<script>
const params=new URLSearchParams(location.search);
const batch=params.get('id'); // class10science
let currentType="video";

fetch(`/data/batches/${batch}/about.json`)
.then(r=>r.json())
.then(d=>{
  batchTitle.innerText=d.name;
  batchThumb.src=d.thumbnail;
  showAbout(d.description);
});

function openTab(type){
  currentType=type;
  if(type==="about") return;
  loadSubjects(type);
}

function showAbout(text){
  content.innerHTML=`<p class="text-textdim">${text}</p>`;
}

function loadSubjects(type){
  content.innerHTML=`<p class="text-textdim">Select a subject</p>
  <div id="subjects" class="grid grid-cols-2 md:grid-cols-3 gap-4 mt-4"></div>`;

  ["physics","chemistry"].forEach(sub=>{
    document.getElementById("subjects").innerHTML+=`
      <div onclick="openSubject('${type}','${sub}')"
           class="card border border-borderp rounded-xl p-4 cursor-pointer">
        ${sub.toUpperCase()}
      </div>`;
  });
}

function openSubject(type,subject){
  fetch(`/data/batches/${batch}/${type}/${subject}.json`)
  .then(r=>r.json())
  .then(d=>{
    content.innerHTML=`<h2 class="text-xl font-semibold mb-4">${d.subject}</h2>`;
    d.chapters.forEach(ch=>{
      content.innerHTML+=`
        <div class="border border-borderp/40 rounded-lg p-3 mb-3">
          <div onclick="this.nextElementSibling.classList.toggle('hidden')"
               class="font-medium cursor-pointer">${ch.name}</div>
          <div class="hidden mt-2 space-y-2">
            ${ch.lectures.map(l=>`
              <div class="flex justify-between text-sm text-textdim">
                ${l.title}
                <a href="${l.play}" class="border border-borderp px-2 rounded">Play</a>
              </div>`).join("")}
          </div>
        </div>`;
    });
  });
}
</script>

</body>
</html>